(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5152],{10044:(a,e,t)=>{Promise.resolve().then(t.bind(t,99387))},99387:(a,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>h});var l=t(95155),r=t(12115),o=t(76046),s=t(64665),n=t(63551),d=t(42479),u=t(91068),i=t(69606),p=t(96063),c=t(84698),f=t(81638);let v={values:[{label:"Aktif",value:"A"},{label:"Nonaktif",value:"N"}]},h=()=>{let a=(0,o.useRouter)(),e=(0,o.useSearchParams)(),t=e.get("id"),h=e.get("view"),k=(0,f.j)(),m=(0,f.G)(a=>a.kelompok_pelajaran),y={nama_kelpelajaran:"",keterangan:"",nomor_urut:"",status:{value:"A",label:"Aktif"},parent_id:{value:"",label:""}},[j,_]=(0,r.useState)(y),[g,w]=(0,r.useState)(!1),{control:A,handleSubmit:b,formState:{errors:L},reset:P}=(0,i.mN)({defaultValues:y}),x=(0,r.useCallback)(()=>{k((0,c.EG)()),a.replace("/app/kelompok-pelajaran/list")},[k,a]);return(0,r.useEffect)(()=>{k((0,c.Av)({parent:"1"})),t&&k((0,c.ft)(t)).then(a=>{var e;let t={...null==a?void 0:null===(e=a.payload)||void 0===e?void 0:e.data};t&&(t.status=v.values.find(a=>a.value===t.status),t.parent&&(t.parent_id={value:t.parent.id_kelpelajaran,label:t.parent.nama_kelpelajaran}),_(t),P(t))})},[k,t,P]),(0,r.useEffect)(()=>{m.crud&&(m.crud.status?(u.oR.success("Success saved"),x()):(u.oR.error("Error saved: "+m.crud.message),w(!1)))},[x,m]),(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(s.default,{children:[(0,l.jsx)(n.default,{title:"Form Kelompok Mata Pelajaran"}),(0,l.jsx)(d.default,{children:(0,l.jsx)("form",{onSubmit:b(()=>{g||(w(!0),t?k((0,c.sJ)({id:t,params:{...j,status:j.status.value,parent_id:j.parent_id.value}})):k((0,c.VS)({...j,status:j.status.value,parent_id:j.parent_id.value})))}),autoComplete:"off",children:(0,p.v$)({control:A,errors:L,state:j,setState:_,fields:[(0,p.ZZ)({type:"select",key:"parent_id",label:"Parent",placeholder:"Pilih Parent",required:!0,options:{values:m.datas.map(a=>({label:a.nama_kelpelajaran,value:a.id_kelpelajaran}))},readOnly:!!h}),(0,p.ZZ)({type:"text",key:"nama_kelpelajaran",label:"Name",placeholder:"Input nama",required:!0,readOnly:!!h}),(0,p.ZZ)({type:"numeral",key:"nomor_urut",label:"Nomor Urut",placeholder:"Input Nomor Urut",required:!0,readOnly:!!h}),(0,p.ZZ)({type:"select",key:"status",label:"Status",placeholder:"Pilih Status",required:!0,options:v,readOnly:!!h}),(0,p.ZZ)({type:"textarea",key:"keterangan",label:"Keterangan",placeholder:"Input keterangan",required:!1,readOnly:!!h}),(0,p.Jw)({onCancel:x,loading:g,disabled:!!h})]})})})]})})}},84698:(a,e,t)=>{"use strict";t.d(e,{Av:()=>s,Ay:()=>k,EG:()=>h,RU:()=>f,VS:()=>u,YI:()=>p,ft:()=>d,iT:()=>n,sJ:()=>i});var l=t(48943),r=t(83197);let o={dataPage:{values:[],total:0},data:{},datas:[],crud:null,delete:null,import:null,export:null},s=(0,l.zD)("kelompok_pelajaran/fetchAll",async(a,e)=>{try{return(await r.A.get("/app/kelompok-pelajaran/all-data",{params:a})).data}catch(a){var t;return e.fulfillWithValue(null===(t=a.response)||void 0===t?void 0:t.data)}}),n=(0,l.zD)("kelompok_pelajaran/fetchPage",async(a,e)=>{try{return(await r.A.get("/app/kelompok-pelajaran",{params:a})).data}catch(a){var t;return e.fulfillWithValue(null===(t=a.response)||void 0===t?void 0:t.data)}}),d=(0,l.zD)("kelompok_pelajaran/fetchById",async(a,e)=>{try{return(await r.A.get("/app/kelompok-pelajaran/".concat(a))).data}catch(a){var t;return e.fulfillWithValue(null===(t=a.response)||void 0===t?void 0:t.data)}}),u=(0,l.zD)("kelompok_pelajaran/create",async(a,e)=>{try{return(await r.A.post("/app/kelompok-pelajaran",a)).data}catch(a){var t;return e.fulfillWithValue(null===(t=a.response)||void 0===t?void 0:t.data)}}),i=(0,l.zD)("kelompok_pelajaran/update",async(a,e)=>{let{id:t,params:l}=a;try{return(await r.A.put("/app/kelompok-pelajaran/".concat(t),l)).data}catch(a){var o;return e.fulfillWithValue(null===(o=a.response)||void 0===o?void 0:o.data)}}),p=(0,l.zD)("kelompok_pelajaran/delete",async(a,e)=>{try{return(await r.A.delete("/app/kelompok-pelajaran/".concat(a))).data}catch(a){var t;return e.fulfillWithValue(null===(t=a.response)||void 0===t?void 0:t.data)}}),c=(0,l.zD)("kelompok_pelajaran/import",async(a,e)=>{try{return(await r.A.post("/app/kelompok-pelajaran/import",a)).data}catch(a){var t;return e.fulfillWithValue(null===(t=a.response)||void 0===t?void 0:t.data)}}),f=(0,l.zD)("kelompok_pelajaran/export",async(a,e)=>{try{return(await r.A.post("/app/kelompok-pelajaran/export",a)).data}catch(a){var t;return e.fulfillWithValue(null===(t=a.response)||void 0===t?void 0:t.data)}}),v=(0,l.Z0)({name:"kelompok_pelajaran",initialState:o,reducers:{resetRedux:()=>o},extraReducers:a=>{a.addCase(s.fulfilled,(a,e)=>{a.datas=e.payload.data||[]}),a.addCase(n.fulfilled,(a,e)=>{var t,l;a.dataPage={values:(null===(t=e.payload.data)||void 0===t?void 0:t.values)||[],total:(null===(l=e.payload.data)||void 0===l?void 0:l.total)||0}}),a.addCase(d.fulfilled,(a,e)=>{a.data=e.payload.data}),a.addCase(p.fulfilled,(a,e)=>{a.delete=e.payload.message}),a.addCase(u.fulfilled,(a,e)=>{a.crud=e.payload}),a.addCase(i.fulfilled,(a,e)=>{a.crud=e.payload}),a.addCase(c.fulfilled,(a,e)=>{a.import=e.payload}),a.addCase(f.fulfilled,(a,e)=>{a.export=e.payload})}}),{resetRedux:h}=v.actions,k=v.reducer},83197:(a,e,t)=>{"use strict";t.d(e,{A:()=>i});var l=t(82651),r=t(2615),o=t(68411);let s=l.A.create({baseURL:"http://103.197.190.47:5001"}),n=!1,d=[];s.defaults.showLoading=!0;let u=function(a){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;d.forEach(t=>{a?t.reject(a):t.resolve(e)}),d=[]};s.interceptors.request.use(async a=>{var e;let t=await (0,r.getSession)();return(null==t?void 0:t.access_token)&&(a.headers.Authorization="Bearer ".concat(t.access_token)),(null!==(e=a.showLoading)&&void 0!==e?e:s.defaults.showLoading)&&(o.L.start(),o.L.progress(10)),a}),s.interceptors.response.use(a=>{var e;return(null!==(e=a.config.showLoading)&&void 0!==e?e:s.defaults.showLoading)&&(o.L.progress(100),setTimeout(()=>{o.L.stop(),o.L.progress(0)},300)),a},async a=>{var e,t;let l=a.config;if((null!==(t=l.showLoading)&&void 0!==t?t:s.defaults.showLoading)&&(o.L.stop(),o.L.progress(0)),(null===(e=a.response)||void 0===e?void 0:e.status)===401&&!l._retry){if(n)return new Promise((a,e)=>{d.push({resolve:a,reject:e})}).then(a=>(l.headers.Authorization="Bearer ".concat(a),s(l))).catch(a=>Promise.reject(a));l._retry=!0,n=!0;try{let e=await fetch("/api/auth/refresh",{method:"GET"}),t=await e.json();if((null==t?void 0:t.error)==="RefreshAccessTokenError")return(0,r.signOut)(),Promise.reject(a);let o=null==t?void 0:t.access_token;return u(null,o),n=!1,l.headers.Authorization="Bearer ".concat(o),s(l)}catch(a){return u(a,null),n=!1,(0,r.signOut)(),Promise.reject(a)}}return Promise.reject(a)});let i=s},68411:(a,e,t)=>{"use strict";t.d(e,{L:()=>s});let l=[],r=[],o=0,s={subscribe:a=>(l.push(a),()=>{l=l.filter(e=>e!==a)}),emit(a){l.forEach(e=>e(a))},start(){o++,this.emit(!0)},stop(){--o<=0&&(o=0,this.emit(!1))},onProgress:a=>(r.push(a),()=>{r=r.filter(e=>e!==a)}),progress(a){r.forEach(e=>e(a))}}}},a=>{var e=e=>a(a.s=e);a.O(0,[5099,275,5004,277,5876,777,5273,2295,9892,2806,2598,6874,6403,6298,5181,9905,3784,9234,9668,9639,545,2615,505,2651,1019,790,9606,1829,8235,7643,3126,8441,1517,7358],()=>e(10044)),_N_E=a.O()}]);