(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9835],{11237:(e,a,t)=>{Promise.resolve().then(t.bind(t,42708))},42708:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>h});var l=t(95155),r=t(12115),s=t(76046),o=t(64665),d=t(63551),u=t(42479),i=t(91068),n=t(69606),c=t(81638),f=t(13375),v=t(96063);let p={values:[{label:"Aktif",value:1},{label:"Nonaktif",value:2}]},h=()=>{let e=(0,s.useRouter)(),a=(0,s.useSearchParams)(),t=a.get("id"),h=a.get("view"),y=(0,c.j)(),g=(0,c.G)(e=>e.role),m={role_name:"",status:{value:1,label:"Aktif"}},[w,A]=(0,r.useState)(m),[b,L]=(0,r.useState)(!1),{control:z,handleSubmit:k,formState:{errors:E},reset:C}=(0,n.mN)({defaultValues:m}),_=(0,r.useCallback)(()=>{y((0,f.EG)()),e.replace("/app/role/list")},[y,e]);return(0,r.useEffect)(()=>{t&&y((0,f.d3)(t)).then(e=>{var a;let t={...null==e?void 0:null===(a=e.payload)||void 0===a?void 0:a.data};t&&(t.status=p.values.find(e=>e.value===t.status),A(t),C(t))})},[y,t,C]),(0,r.useEffect)(()=>{g.crud&&(g.crud.status?(i.oR.success("Success saved"),_()):(i.oR.error("Error saved: "+g.crud.message),L(!1)))},[_,g]),(0,l.jsxs)(o.default,{children:[(0,l.jsx)(d.default,{title:"Form Role"}),(0,l.jsx)(u.default,{children:(0,l.jsx)("form",{onSubmit:k(()=>{b||(L(!0),t?y((0,f.Wb)({id:t,params:{...w,status:w.status.value}})):y((0,f.tz)({...w,status:w.status.value})))}),autoComplete:"off",children:(0,v.v$)({control:z,errors:E,state:w,setState:A,fields:[(0,v.ZZ)({type:"text",key:"role_name",label:"Role Name",placeholder:"Input role name",required:!0,readOnly:!!h}),(0,v.ZZ)({type:"select",key:"status",label:"Status",placeholder:"Pilih Status",required:!0,options:p,readOnly:!!h}),(0,v.Jw)({onCancel:_,loading:b,disabled:!!h})]})})})]})}},13375:(e,a,t)=>{"use strict";t.d(a,{Ay:()=>m,EG:()=>y,EO:()=>c,Wb:()=>n,d3:()=>u,dI:()=>g,e4:()=>d,qY:()=>v,qi:()=>f,tz:()=>i});var l=t(48943),r=t(83197);let s={dataPage:{values:[],total:0},data:{},datas:[],crud:null,delete:null,navigation:[]},o=(0,l.zD)("role/fetchAll",async(e,a)=>{try{return(await r.A.get("/app/role/all-data",{params:e})).data}catch(e){var t;return a.fulfillWithValue(null===(t=e.response)||void 0===t?void 0:t.data)}}),d=(0,l.zD)("role/fetchPage",async(e,a)=>{try{return(await r.A.get("/app/role",{params:e})).data}catch(e){var t;return a.fulfillWithValue(null===(t=e.response)||void 0===t?void 0:t.data)}}),u=(0,l.zD)("role/fetchById",async(e,a)=>{try{return(await r.A.get("/app/role/".concat(e))).data}catch(e){var t;return a.fulfillWithValue(null===(t=e.response)||void 0===t?void 0:t.data)}}),i=(0,l.zD)("role/create",async(e,a)=>{try{return(await r.A.post("/app/role",e)).data}catch(e){var t;return a.fulfillWithValue(null===(t=e.response)||void 0===t?void 0:t.data)}}),n=(0,l.zD)("role/update",async(e,a)=>{let{id:t,params:l}=e;try{return(await r.A.put("/app/role/".concat(t),l)).data}catch(e){var s;return a.fulfillWithValue(null===(s=e.response)||void 0===s?void 0:s.data)}}),c=(0,l.zD)("role/delete",async(e,a)=>{try{return(await r.A.delete("/app/role/".concat(e))).data}catch(e){var t;return a.fulfillWithValue(null===(t=e.response)||void 0===t?void 0:t.data)}}),f=(0,l.zD)("role/fetchRoleMenuById",async(e,a)=>{try{return(await r.A.get("/app/role-menu/".concat(e))).data}catch(e){var t;return a.fulfillWithValue(null===(t=e.response)||void 0===t?void 0:t.data)}}),v=(0,l.zD)("role/postRoleMenu",async(e,a)=>{try{return(await r.A.post("/app/role-menu",e)).data}catch(e){var t;return a.fulfillWithValue(null===(t=e.response)||void 0===t?void 0:t.data)}}),p=(0,l.zD)("role/fetchNavigation",async(e,a)=>{try{return(await r.A.get("/navigation",{headers:{Authorization:void 0}})).data}catch(e){var t;return a.fulfillWithValue(null===(t=e.response)||void 0===t?void 0:t.data)}}),h=(0,l.Z0)({name:"role",initialState:s,reducers:{resetRedux:()=>s,setNavigation:(e,a)=>{e.navigation=a.payload}},extraReducers:e=>{e.addCase(o.fulfilled,(e,a)=>{e.datas=a.payload.data||[]}),e.addCase(d.fulfilled,(e,a)=>{var t,l;e.dataPage={values:(null===(t=a.payload.data)||void 0===t?void 0:t.values)||[],total:(null===(l=a.payload.data)||void 0===l?void 0:l.total)||0}}),e.addCase(u.fulfilled,(e,a)=>{e.data=a.payload.data}),e.addCase(c.fulfilled,(e,a)=>{e.delete=a.payload.message}),e.addCase(i.fulfilled,(e,a)=>{e.crud=a.payload}),e.addCase(n.fulfilled,(e,a)=>{e.crud=a.payload}),e.addCase(v.fulfilled,(e,a)=>{e.crud=a.payload}),e.addCase(p.fulfilled,(e,a)=>{e.navigation=a.payload.data||[]})}}),{resetRedux:y,setNavigation:g}=h.actions,m=h.reducer},83197:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});var l=t(82651),r=t(2615),s=t(68411);let o=l.A.create({baseURL:"http://103.197.190.47:5001"}),d=!1,u=[];o.defaults.showLoading=!0;let i=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;u.forEach(t=>{e?t.reject(e):t.resolve(a)}),u=[]};o.interceptors.request.use(async e=>{var a;let t=await (0,r.getSession)();return(null==t?void 0:t.access_token)&&(e.headers.Authorization="Bearer ".concat(t.access_token)),(null!==(a=e.showLoading)&&void 0!==a?a:o.defaults.showLoading)&&(s.L.start(),s.L.progress(10)),e}),o.interceptors.response.use(e=>{var a;return(null!==(a=e.config.showLoading)&&void 0!==a?a:o.defaults.showLoading)&&(s.L.progress(100),setTimeout(()=>{s.L.stop(),s.L.progress(0)},300)),e},async e=>{var a,t;let l=e.config;if((null!==(t=l.showLoading)&&void 0!==t?t:o.defaults.showLoading)&&(s.L.stop(),s.L.progress(0)),(null===(a=e.response)||void 0===a?void 0:a.status)===401&&!l._retry){if(d)return new Promise((e,a)=>{u.push({resolve:e,reject:a})}).then(e=>(l.headers.Authorization="Bearer ".concat(e),o(l))).catch(e=>Promise.reject(e));l._retry=!0,d=!0;try{let a=await fetch("/api/auth/refresh",{method:"GET"}),t=await a.json();if((null==t?void 0:t.error)==="RefreshAccessTokenError")return(0,r.signOut)(),Promise.reject(e);let s=null==t?void 0:t.access_token;return i(null,s),d=!1,l.headers.Authorization="Bearer ".concat(s),o(l)}catch(e){return i(e,null),d=!1,(0,r.signOut)(),Promise.reject(e)}}return Promise.reject(e)});let n=o},68411:(e,a,t)=>{"use strict";t.d(a,{L:()=>o});let l=[],r=[],s=0,o={subscribe:e=>(l.push(e),()=>{l=l.filter(a=>a!==e)}),emit(e){l.forEach(a=>a(e))},start(){s++,this.emit(!0)},stop(){--s<=0&&(s=0,this.emit(!1))},onProgress:e=>(r.push(e),()=>{r=r.filter(a=>a!==e)}),progress(e){r.forEach(a=>a(e))}}}},e=>{var a=a=>e(e.s=a);e.O(0,[5099,275,5004,277,5876,777,5273,2295,9892,2806,2598,6874,6403,6298,5181,9905,3784,9234,9668,9639,545,2615,505,2651,1019,790,9606,1829,8235,7643,3126,8441,1517,7358],()=>a(11237)),_N_E=e.O()}]);