(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5374],{35626:(a,e,t)=>{Promise.resolve().then(t.bind(t,1637))},1637:(a,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>h});var l=t(95155),r=t(12115),s=t(76046),o=t(64665),u=t(63551),d=t(42479),i=t(91068),n=t(69606),c=t(96063),p=t(22428),f=t(81638);let v={values:[{label:"Aktif",value:1},{label:"Nonaktif",value:2}]},h=()=>{let a=(0,s.useRouter)(),e=(0,s.useSearchParams)(),t=e.get("id"),h=e.get("view"),g=(0,f.j)(),m=(0,f.G)(a=>a.param_global),y={param_key:"",param_value:"",param_desc:"",status:{value:1,label:"Aktif"}},[b,k]=(0,r.useState)(y),[w,_]=(0,r.useState)(!1),{control:A,handleSubmit:L,formState:{errors:E},reset:C}=(0,n.mN)({defaultValues:y}),P=(0,r.useCallback)(()=>{g((0,p.EG)()),a.replace("/app/param-global/list")},[g,a]);return(0,r.useEffect)(()=>{t&&g((0,p.$C)(t)).then(a=>{var e;let t={...null==a?void 0:null===(e=a.payload)||void 0===e?void 0:e.data};t&&(t.status=v.values.find(a=>a.value===t.status),k(t),C(t))})},[g,t,C]),(0,r.useEffect)(()=>{m.crud&&(m.crud.status?(i.oR.success("Success saved"),P()):(i.oR.error("Error saved: "+m.crud.message),_(!1)))},[P,m]),(0,l.jsxs)(o.default,{children:[(0,l.jsx)(u.default,{title:"Form ParamGlobal"}),(0,l.jsx)(d.default,{children:(0,l.jsx)("form",{onSubmit:L(()=>{w||(_(!0),t?g((0,p.Qo)({id:t,params:{...b,status:b.status.value}})):g((0,p.R5)({...b,status:b.status.value})))}),autoComplete:"off",children:(0,c.v$)({control:A,errors:E,state:b,setState:k,fields:[(0,c.ZZ)({type:"text",key:"param_key",label:"Key",placeholder:"Input key",required:!0,readOnly:!!h||!!t}),(0,c.ZZ)({type:"text",key:"param_value",label:"Value",placeholder:"Input value",required:!0,readOnly:!!h}),(0,c.ZZ)({type:"textarea",key:"param_desc",label:"Deskripsi",placeholder:"Input dekripsi",required:!0,readOnly:!!h}),(0,c.ZZ)({type:"select",key:"status",label:"Status",placeholder:"Pilih Status",required:!0,options:v,readOnly:!!h}),(0,c.Jw)({onCancel:P,loading:w,disabled:!!h})]})})})]})}},22428:(a,e,t)=>{"use strict";t.d(e,{$C:()=>d,Ay:()=>v,EG:()=>f,Qo:()=>n,R5:()=>i,aE:()=>u,u6:()=>c});var l=t(48943),r=t(83197);let s={dataPage:{values:[],total:0},data:{},datas:[],crud:null,delete:null},o=(0,l.zD)("param-global/fetchAll",async(a,e)=>{try{return(await r.A.get("/app/param-global/all-data",{params:a})).data}catch(a){var t;return e.fulfillWithValue(null===(t=a.response)||void 0===t?void 0:t.data)}}),u=(0,l.zD)("param-global/fetchPage",async(a,e)=>{try{return(await r.A.get("/app/param-global",{params:a})).data}catch(a){var t;return e.fulfillWithValue(null===(t=a.response)||void 0===t?void 0:t.data)}}),d=(0,l.zD)("param-global/fetchById",async(a,e)=>{try{return(await r.A.get("/app/param-global/".concat(a))).data}catch(a){var t;return e.fulfillWithValue(null===(t=a.response)||void 0===t?void 0:t.data)}}),i=(0,l.zD)("param-global/create",async(a,e)=>{try{return(await r.A.post("/app/param-global",a)).data}catch(a){var t;return e.fulfillWithValue(null===(t=a.response)||void 0===t?void 0:t.data)}}),n=(0,l.zD)("param-global/update",async(a,e)=>{let{id:t,params:l}=a;try{return(await r.A.put("/app/param-global/".concat(t),l)).data}catch(a){var s;return e.fulfillWithValue(null===(s=a.response)||void 0===s?void 0:s.data)}}),c=(0,l.zD)("param-global/delete",async(a,e)=>{try{return(await r.A.delete("/app/param-global/".concat(a))).data}catch(a){var t;return e.fulfillWithValue(null===(t=a.response)||void 0===t?void 0:t.data)}}),p=(0,l.Z0)({name:"param_global",initialState:s,reducers:{resetRedux:()=>s},extraReducers:a=>{a.addCase(o.fulfilled,(a,e)=>{a.datas=e.payload.data||[]}),a.addCase(u.fulfilled,(a,e)=>{var t,l;a.dataPage={values:(null===(t=e.payload.data)||void 0===t?void 0:t.values)||[],total:(null===(l=e.payload.data)||void 0===l?void 0:l.total)||0}}),a.addCase(d.fulfilled,(a,e)=>{a.data=e.payload.data}),a.addCase(c.fulfilled,(a,e)=>{a.delete=e.payload.message}),a.addCase(i.fulfilled,(a,e)=>{a.crud=e.payload}),a.addCase(n.fulfilled,(a,e)=>{a.crud=e.payload})}}),{resetRedux:f}=p.actions,v=p.reducer},83197:(a,e,t)=>{"use strict";t.d(e,{A:()=>n});var l=t(82651),r=t(2615),s=t(68411);let o=l.A.create({baseURL:"http://103.197.190.47:5001"}),u=!1,d=[];o.defaults.showLoading=!0;let i=function(a){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;d.forEach(t=>{a?t.reject(a):t.resolve(e)}),d=[]};o.interceptors.request.use(async a=>{var e;let t=await (0,r.getSession)();return(null==t?void 0:t.access_token)&&(a.headers.Authorization="Bearer ".concat(t.access_token)),(null!==(e=a.showLoading)&&void 0!==e?e:o.defaults.showLoading)&&(s.L.start(),s.L.progress(10)),a}),o.interceptors.response.use(a=>{var e;return(null!==(e=a.config.showLoading)&&void 0!==e?e:o.defaults.showLoading)&&(s.L.progress(100),setTimeout(()=>{s.L.stop(),s.L.progress(0)},300)),a},async a=>{var e,t;let l=a.config;if((null!==(t=l.showLoading)&&void 0!==t?t:o.defaults.showLoading)&&(s.L.stop(),s.L.progress(0)),(null===(e=a.response)||void 0===e?void 0:e.status)===401&&!l._retry){if(u)return new Promise((a,e)=>{d.push({resolve:a,reject:e})}).then(a=>(l.headers.Authorization="Bearer ".concat(a),o(l))).catch(a=>Promise.reject(a));l._retry=!0,u=!0;try{let e=await fetch("/api/auth/refresh",{method:"GET"}),t=await e.json();if((null==t?void 0:t.error)==="RefreshAccessTokenError")return(0,r.signOut)(),Promise.reject(a);let s=null==t?void 0:t.access_token;return i(null,s),u=!1,l.headers.Authorization="Bearer ".concat(s),o(l)}catch(a){return i(a,null),u=!1,(0,r.signOut)(),Promise.reject(a)}}return Promise.reject(a)});let n=o},68411:(a,e,t)=>{"use strict";t.d(e,{L:()=>o});let l=[],r=[],s=0,o={subscribe:a=>(l.push(a),()=>{l=l.filter(e=>e!==a)}),emit(a){l.forEach(e=>e(a))},start(){s++,this.emit(!0)},stop(){--s<=0&&(s=0,this.emit(!1))},onProgress:a=>(r.push(a),()=>{r=r.filter(e=>e!==a)}),progress(a){r.forEach(e=>e(a))}}}},a=>{var e=e=>a(a.s=e);a.O(0,[5099,275,5004,277,5876,777,5273,2295,9892,2806,2598,6874,6403,6298,5181,9905,3784,9234,9668,9639,545,2615,505,2651,1019,790,9606,1829,8235,7643,3126,8441,1517,7358],()=>e(35626)),_N_E=a.O()}]);