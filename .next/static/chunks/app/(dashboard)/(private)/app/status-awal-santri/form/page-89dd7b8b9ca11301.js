(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2043],{62981:(a,t,e)=>{Promise.resolve().then(e.bind(e,94316))},94316:(a,t,e)=>{"use strict";e.r(t),e.d(t,{default:()=>v});var s=e(95155),r=e(12115),l=e(76046),o=e(64665),u=e(63551),i=e(42479),n=e(91068),d=e(69606),c=e(81638),p=e(64775),h=e(96063);let f={values:[{label:"Aktif",value:"Aktif"},{label:"Nonaktif",value:"Nonaktif"}]},v=()=>{let a=(0,l.useRouter)(),t=(0,l.useSearchParams)(),e=t.get("id"),v=t.get("view"),w=(0,c.j)(),y=(0,c.G)(a=>a.status_awal_santri),g={kode_status_awal:"",nama_status_awal:"",keterangan:"",status:{value:"Aktif",label:"Aktif"}},[m,_]=(0,r.useState)(g),[A,k]=(0,r.useState)(!1),{control:S,handleSubmit:z,formState:{errors:L},setValue:b,reset:x}=(0,d.mN)({defaultValues:g});(0,r.useEffect)(()=>{e&&w((0,p.pX)(e)).then(a=>{var t;let e={...null==a?void 0:null===(t=a.payload)||void 0===t?void 0:t.data};e&&(e.status=f.values.find(a=>a.value===e.status),_(e),x(e))})},[w,x]),(0,r.useEffect)(()=>{y.crud&&(y.crud.status?(n.oR.success("Success saved"),C()):(n.oR.error("Error saved: "+y.crud.message),k(!1)))},[y]);let C=()=>{w((0,p.EG)()),a.replace("/app/status-awal-santri/list")};return(0,s.jsxs)(o.default,{children:[(0,s.jsx)(u.default,{title:"Form Status Awal Santri"}),(0,s.jsx)(i.default,{children:(0,s.jsx)("form",{onSubmit:z(()=>{A||(k(!0),e?w((0,p.YY)({id:e,param:{...m,status:m.status.value}})):w((0,p.Xq)({...m,status:m.status.value})))}),autoComplete:"off",children:(0,h.v$)({control:S,errors:L,state:m,setState:_,fields:[(0,h.ZZ)({type:"text",key:"kode_status_awal",label:"Kode Status Awal",placeholder:"Input Kode Status Awal",required:!0,readOnly:!!v,options:{onChange(a){b("kode_status_awal",a.trim()),_(t=>({...t,kode_status_awal:a.trim()}))}}}),(0,h.ZZ)({type:"text",key:"nama_status_awal",label:"Nama Status Awal",placeholder:"Input Nama Status Awal",required:!0,readOnly:!!v}),(0,h.ZZ)({type:"textarea",key:"keterangan",label:"Keterangan",placeholder:"Input Keterangan",required:!1,readOnly:!!v}),(0,h.ZZ)({type:"select",key:"status",label:"Status",placeholder:"Pilih Status",required:!0,options:f,readOnly:!!v}),(0,h.Jw)({onCancel:C,loading:A,disabled:!!v})]})})})]})}},64775:(a,t,e)=>{"use strict";e.d(t,{Ay:()=>y,EG:()=>w,QO:()=>p,RU:()=>f,Xq:()=>d,YY:()=>c,cN:()=>i,pX:()=>n});var s=e(48943),r=e(2615),l=e(83197);let o={dataPage:{values:[],total:0},data:{},datas:[],crud:null,delete:null,import:null,export:null},u=(0,s.zD)("status-awal-santri/fetchAll",async(a,t)=>{let e=await (0,r.getSession)();try{return(await l.A.get("/app/status-awal-santri/all-data",{headers:{Authorization:"Bearer ".concat(null==e?void 0:e.access_token)},params:a})).data}catch(a){var s;return t.fulfillWithValue(null===(s=a.response)||void 0===s?void 0:s.data)}}),i=(0,s.zD)("status-awal-santri/fetchPage",async(a,t)=>{let e=await (0,r.getSession)();try{return(await l.A.get("/app/status-awal-santri",{headers:{Authorization:"Bearer ".concat(null==e?void 0:e.access_token)},params:a})).data}catch(a){var s;return t.fulfillWithValue(null===(s=a.response)||void 0===s?void 0:s.data)}}),n=(0,s.zD)("status-awal-santri/fetchById",async(a,t)=>{let e=await (0,r.getSession)();try{return(await l.A.get("/app/status-awal-santri/".concat(a),{headers:{Authorization:"Bearer ".concat(null==e?void 0:e.access_token)}})).data}catch(a){var s;return t.fulfillWithValue(null===(s=a.response)||void 0===s?void 0:s.data)}}),d=(0,s.zD)("status-awal-santri/create",async(a,t)=>{let e=await (0,r.getSession)();try{return(await l.A.post("/app/status-awal-santri",a,{headers:{Authorization:"Bearer ".concat(null==e?void 0:e.access_token)}})).data}catch(a){var s;return t.fulfillWithValue(null===(s=a.response)||void 0===s?void 0:s.data)}}),c=(0,s.zD)("status-awal-santri/update",async(a,t)=>{let{id:e,param:s}=a,o=await (0,r.getSession)();try{return(await l.A.put("/app/status-awal-santri/".concat(e),s,{headers:{Authorization:"Bearer ".concat(null==o?void 0:o.access_token)}})).data}catch(a){var u;return t.fulfillWithValue(null===(u=a.response)||void 0===u?void 0:u.data)}}),p=(0,s.zD)("status-awal-santri/delete",async(a,t)=>{let e=await (0,r.getSession)();try{return(await l.A.delete("/app/status-awal-santri/".concat(a),{headers:{Authorization:"Bearer ".concat(null==e?void 0:e.access_token)}})).data}catch(a){var s;return t.fulfillWithValue(null===(s=a.response)||void 0===s?void 0:s.data)}}),h=(0,s.zD)("status-awal-santri/import",async(a,t)=>{try{return(await l.A.post("/app/status-awal-santri/import",a)).data}catch(a){var e;return t.fulfillWithValue(null===(e=a.response)||void 0===e?void 0:e.data)}}),f=(0,s.zD)("status-awal-santri/export",async(a,t)=>{try{return(await l.A.post("/app/status-awal-santri/export",a)).data}catch(a){var e;return t.fulfillWithValue(null===(e=a.response)||void 0===e?void 0:e.data)}}),v=(0,s.Z0)({name:"status_awal_santri",initialState:o,reducers:{resetRedux:()=>o},extraReducers:a=>{a.addCase(u.fulfilled,(a,t)=>{a.datas=t.payload.data||[]}),a.addCase(i.fulfilled,(a,t)=>{var e,s;a.dataPage={values:(null===(e=t.payload.data)||void 0===e?void 0:e.values)||[],total:(null===(s=t.payload.data)||void 0===s?void 0:s.total)||0}}),a.addCase(n.fulfilled,(a,t)=>{a.data=t.payload.data}),a.addCase(p.fulfilled,(a,t)=>{a.delete=t.payload.message}),a.addCase(d.fulfilled,(a,t)=>{a.crud=t.payload}),a.addCase(c.fulfilled,(a,t)=>{a.crud=t.payload}),a.addCase(h.fulfilled,(a,t)=>{a.import=t.payload}),a.addCase(f.fulfilled,(a,t)=>{a.export=t.payload})}}),{resetRedux:w}=v.actions,y=v.reducer},83197:(a,t,e)=>{"use strict";e.d(t,{A:()=>d});var s=e(82651),r=e(2615),l=e(68411);let o=s.A.create({baseURL:"http://103.197.190.47:5001"}),u=!1,i=[];o.defaults.showLoading=!0;let n=function(a){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i.forEach(e=>{a?e.reject(a):e.resolve(t)}),i=[]};o.interceptors.request.use(async a=>{var t;let e=await (0,r.getSession)();return(null==e?void 0:e.access_token)&&(a.headers.Authorization="Bearer ".concat(e.access_token)),(null!==(t=a.showLoading)&&void 0!==t?t:o.defaults.showLoading)&&(l.L.start(),l.L.progress(10)),a}),o.interceptors.response.use(a=>{var t;return(null!==(t=a.config.showLoading)&&void 0!==t?t:o.defaults.showLoading)&&(l.L.progress(100),setTimeout(()=>{l.L.stop(),l.L.progress(0)},300)),a},async a=>{var t,e;let s=a.config;if((null!==(e=s.showLoading)&&void 0!==e?e:o.defaults.showLoading)&&(l.L.stop(),l.L.progress(0)),(null===(t=a.response)||void 0===t?void 0:t.status)===401&&!s._retry){if(u)return new Promise((a,t)=>{i.push({resolve:a,reject:t})}).then(a=>(s.headers.Authorization="Bearer ".concat(a),o(s))).catch(a=>Promise.reject(a));s._retry=!0,u=!0;try{let t=await fetch("/api/auth/refresh",{method:"GET"}),e=await t.json();if((null==e?void 0:e.error)==="RefreshAccessTokenError")return(0,r.signOut)(),Promise.reject(a);let l=null==e?void 0:e.access_token;return n(null,l),u=!1,s.headers.Authorization="Bearer ".concat(l),o(s)}catch(a){return n(a,null),u=!1,(0,r.signOut)(),Promise.reject(a)}}return Promise.reject(a)});let d=o},68411:(a,t,e)=>{"use strict";e.d(t,{L:()=>o});let s=[],r=[],l=0,o={subscribe:a=>(s.push(a),()=>{s=s.filter(t=>t!==a)}),emit(a){s.forEach(t=>t(a))},start(){l++,this.emit(!0)},stop(){--l<=0&&(l=0,this.emit(!1))},onProgress:a=>(r.push(a),()=>{r=r.filter(t=>t!==a)}),progress(a){r.forEach(t=>t(a))}}}},a=>{var t=t=>a(a.s=t);a.O(0,[5099,275,5004,277,5876,777,5273,2295,9892,2806,2598,6874,6403,6298,5181,9905,3784,9234,9668,9639,545,2615,505,2651,1019,790,9606,1829,8235,7643,3126,8441,1517,7358],()=>t(62981)),_N_E=a.O()}]);