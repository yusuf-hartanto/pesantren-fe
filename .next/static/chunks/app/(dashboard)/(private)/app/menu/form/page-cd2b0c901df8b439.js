(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4576,8174],{30202:(e,t,a)=>{Promise.resolve().then(a.bind(a,64598))},78416:(e,t,a)=>{"use strict";a.d(t,{A:()=>j});var r=a(12115),l=a(43463),o=a(7123),i=a(90293),n=a(37410),s=a(72408),d=a(49883),u=a(78562),c=a(81045),p=a(37157);function h(e){return(0,p.Ay)("MuiDialog",e)}let m=(0,c.A)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);var f=a(42138),v=a(44522),y=a(89142),g=a(35761),x=a(98330),A=a(12567),b=a(95155);let k=(0,y.Ay)(v.A,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),w=e=>{let{classes:t,scroll:a,maxWidth:r,fullWidth:l,fullScreen:i}=e,s={root:["root"],container:["container","scroll".concat((0,n.A)(a))],paper:["paper","paperScroll".concat((0,n.A)(a)),"paperWidth".concat((0,n.A)(String(r))),l&&"paperFullWidth",i&&"paperFullScreen"]};return(0,o.A)(s,h,t)},S=(0,y.Ay)(s.A,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),W=(0,y.Ay)("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.container,t["scroll".concat((0,n.A)(a.scroll))]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),C=(0,y.Ay)(u.A,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.paper,t["scrollPaper".concat((0,n.A)(a.scroll))],t["paperWidth".concat((0,n.A)(String(a.maxWidth)))],a.fullWidth&&t.paperFullWidth,a.fullScreen&&t.paperFullScreen]}})((0,x.A)(e=>{let{theme:t}=e;return{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:e=>{let{ownerState:t}=e;return!t.maxWidth},style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:"px"===t.breakpoints.unit?Math.max(t.breakpoints.values.xs,444):"max(".concat(t.breakpoints.values.xs).concat(t.breakpoints.unit,", 444px)"),["&.".concat(m.paperScrollBody)]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(t.breakpoints.values).filter(e=>"xs"!==e).map(e=>({props:{maxWidth:e},style:{maxWidth:"".concat(t.breakpoints.values[e]).concat(t.breakpoints.unit),["&.".concat(m.paperScrollBody)]:{[t.breakpoints.down(t.breakpoints.values[e]+64)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:e=>{let{ownerState:t}=e;return t.fullWidth},style:{width:"calc(100% - 64px)"}},{props:e=>{let{ownerState:t}=e;return t.fullScreen},style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,["&.".concat(m.paperScrollBody)]:{margin:0,maxWidth:"100%"}}}]}})),j=r.forwardRef(function(e,t){let a=(0,A.b)({props:e,name:"MuiDialog"}),o=(0,g.A)(),n={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{"aria-describedby":s,"aria-labelledby":c,"aria-modal":p=!0,BackdropComponent:h,BackdropProps:m,children:v,className:y,disableEscapeKeyDown:x=!1,fullScreen:j=!1,fullWidth:_=!1,maxWidth:M="sm",onBackdropClick:R,onClick:D,onClose:P,open:L,PaperComponent:T=u.A,PaperProps:E={},scroll:z="paper",TransitionComponent:B=d.A,transitionDuration:N=n,TransitionProps:Z,...O}=a,q={...a,disableEscapeKeyDown:x,fullScreen:j,fullWidth:_,maxWidth:M,scroll:z},F=w(q),I=r.useRef(),V=(0,i.A)(c),Y=r.useMemo(()=>({titleId:V}),[V]);return(0,b.jsx)(S,{className:(0,l.A)(F.root,y),closeAfterTransition:!0,components:{Backdrop:k},componentsProps:{backdrop:{transitionDuration:N,as:h,...m}},disableEscapeKeyDown:x,onClose:P,open:L,ref:t,onClick:e=>{D&&D(e),I.current&&(I.current=null,R&&R(e),P&&P(e,"backdropClick"))},ownerState:q,...O,children:(0,b.jsx)(B,{appear:!0,in:L,timeout:N,role:"presentation",...Z,children:(0,b.jsx)(W,{className:(0,l.A)(F.container),onMouseDown:e=>{I.current=e.target===e.currentTarget},ownerState:q,children:(0,b.jsx)(C,{as:T,elevation:24,role:"dialog","aria-describedby":s,"aria-labelledby":V,"aria-modal":p,...E,className:(0,l.A)(F.paper,E.className),ownerState:q,children:(0,b.jsx)(f.A.Provider,{value:Y,children:v})})})})})})},42138:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=a(12115).createContext({})},27753:(e,t,a)=>{"use strict";a.d(t,{A:()=>v});var r=a(12115),l=a(43463),o=a(7123),i=a(89142),n=a(98330),s=a(12567),d=a(81045),u=a(37157);function c(e){return(0,u.Ay)("MuiDialogContent",e)}(0,d.A)("MuiDialogContent",["root","dividers"]);var p=a(13499),h=a(95155);let m=e=>{let{classes:t,dividers:a}=e;return(0,o.A)({root:["root",a&&"dividers"]},c,t)},f=(0,i.Ay)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,a.dividers&&t.dividers]}})((0,n.A)(e=>{let{theme:t}=e;return{flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:e=>{let{ownerState:t}=e;return t.dividers},style:{padding:"16px 24px",borderTop:"1px solid ".concat((t.vars||t).palette.divider),borderBottom:"1px solid ".concat((t.vars||t).palette.divider)}},{props:e=>{let{ownerState:t}=e;return!t.dividers},style:{[".".concat(p.A.root," + &")]:{paddingTop:0}}}]}})),v=r.forwardRef(function(e,t){let a=(0,s.b)({props:e,name:"MuiDialogContent"}),{className:r,dividers:o=!1,...i}=a,n={...a,dividers:o},d=m(n);return(0,h.jsx)(f,{className:(0,l.A)(d.root,r),ownerState:n,ref:t,...i})})},36417:(e,t,a)=>{"use strict";a.d(t,{A:()=>m});var r=a(12115),l=a(43463),o=a(7123),i=a(9561),n=a(89142),s=a(12567),d=a(13499),u=a(42138),c=a(95155);let p=e=>{let{classes:t}=e;return(0,o.A)({root:["root"]},d.t,t)},h=(0,n.Ay)(i.default,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),m=r.forwardRef(function(e,t){let a=(0,s.b)({props:e,name:"MuiDialogTitle"}),{className:o,id:i,...n}=a,d=p(a),{titleId:m=i}=r.useContext(u.A);return(0,c.jsx)(h,{component:"h2",className:(0,l.A)(d.root,o),ownerState:a,ref:t,variant:"h6",id:null!=i?i:m,...n})})},13499:(e,t,a)=>{"use strict";a.d(t,{A:()=>i,t:()=>o});var r=a(81045),l=a(37157);function o(e){return(0,l.Ay)("MuiDialogTitle",e)}let i=(0,r.A)("MuiDialogTitle",["root"])},64598:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>k});var r=a(95155),l=a(12115),o=a(76046),i=a(64665),n=a(63551),s=a(42479),d=a(91068),u=a(69606),c=a(78416),p=a(36417),h=a(27753),m=a(39905),f=a(68998),v=a(9561),y=a(96063),g=a(33176),x=a(81638);let A=()=>{let e=new Set;for(let t of Array.from(document.styleSheets)){let a;try{a=t.cssRules}catch(e){continue}if(a)for(let t of Array.from(a))t instanceof CSSStyleRule&&t.selectorText.startsWith(".tabler-")&&t.selectorText.split(",").forEach(t=>{let a=t.trim().replace(".","").split(":")[0];a.startsWith("tabler-")&&e.add(a)})}return Array.from(e).sort()},b={values:[{label:"Aktif",value:1},{label:"Nonaktif",value:2}]},k=()=>{let e=(0,o.useRouter)(),t=(0,o.useSearchParams)(),a=t.get("id"),k=t.get("view"),w=(0,x.j)(),S=(0,x.G)(e=>e.menu),W={menu_name:"",status:{value:1,label:"Aktif"},parent_id:{value:"",label:""}},[C,j]=(0,l.useState)(W),[_,M]=(0,l.useState)(!1),[R,D]=(0,l.useState)(!1),[P,L]=(0,l.useState)(""),[T,E]=(0,l.useState)([]),[z,B]=(0,l.useState)(""),{control:N,handleSubmit:Z,formState:{errors:O},reset:q}=(0,u.mN)({defaultValues:W}),F=(0,l.useCallback)(()=>{w((0,g.EG)()),e.replace("/app/menu/list")},[w,e]);(0,l.useEffect)(()=>{w((0,g.dp)({parent:"1"})),E(A()),a&&w((0,g.uK)(a)).then(e=>{var t;let a={...null==e?void 0:null===(t=e.payload)||void 0===t?void 0:t.data};a&&(a.status=b.values.find(e=>e.value===a.status),a.parent&&(a.parent_id={value:a.parent.menu_id,label:a.parent.menu_name}),j(a),q(a))})},[w,a,q]),(0,l.useEffect)(()=>{let e=setTimeout(()=>{B(P)},300);return()=>clearTimeout(e)},[P]);let I=l.useMemo(()=>!P||P.length<2?T.slice(0,120):T.filter(e=>e.includes(P.toLowerCase())),[T,P]);return(0,l.useEffect)(()=>{S.crud&&(S.crud.status?(d.oR.success("Success saved"),F()):(d.oR.error("Error saved: "+S.crud.message),M(!1)))},[F,S]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i.default,{children:[(0,r.jsx)(n.default,{title:"Form Menu"}),(0,r.jsx)(s.default,{children:(0,r.jsx)("form",{onSubmit:Z(()=>{_||(M(!0),a?w((0,g.RW)({id:a,params:{...C,status:C.status.value,parent_id:C.parent_id.value}})):w((0,g.oV)({...C,status:C.status.value,parent_id:C.parent_id.value})))}),autoComplete:"off",children:(0,y.v$)({control:N,errors:O,state:C,setState:j,fields:[(0,y.ZZ)({type:"select",key:"parent_id",label:"Parent",placeholder:"Pilih Parent",required:!0,options:{values:S.datas.map(e=>({label:e.menu_name,value:e.menu_id}))},readOnly:!!k}),(0,y.ZZ)({type:"text",key:"menu_name",label:"Name",placeholder:"Input name",required:!0,readOnly:!!k}),(0,y.ZZ)({type:"text",key:"module_name",label:"Module",placeholder:"Input module",required:!0,readOnly:!!k}),(0,y.ZZ)({type:"numeral",key:"seq_number",label:"Sequence",placeholder:"Input sequence",required:!0,readOnly:!!k}),(0,y.ZZ)({type:"icon-picker",key:"menu_icon",label:"Icon Menu",placeholder:"Pilih icon",readOnly:!0,options:{onClick:()=>D(!0)}}),(0,y.ZZ)({type:"select",key:"status",label:"Status",placeholder:"Pilih Status",required:!0,options:b,readOnly:!!k}),(0,y.Jw)({onCancel:F,loading:_,disabled:!!k})]})})})]}),(0,r.jsxs)(c.A,{open:R,onClose:()=>D(!1),maxWidth:"md",fullWidth:!0,children:[(0,r.jsx)(p.A,{children:"Pilih Icon Menu"}),(0,r.jsxs)(h.A,{children:[P.length<2&&(0,r.jsx)(v.default,{variant:"caption",color:"text.secondary",children:"Ketik minimal 2 huruf untuk mencari icon"}),(0,r.jsx)(m.A,{fullWidth:!0,size:"small",placeholder:"Cari icon (home, user, menu...)",value:P,onChange:e=>L(e.target.value),sx:{mb:3}}),(0,r.jsx)(f.A,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(80px, 1fr))",gap:2,maxHeight:400,overflowY:"auto"},children:I.map(e=>(0,r.jsxs)(f.A,{onClick:()=>{j(t=>({...t,menu_icon:e})),D(!1)},sx:{cursor:"pointer",border:"1px solid #e0e0e0",borderRadius:1,p:2,textAlign:"center","&:hover":{backgroundColor:"#f5f5f5"}},children:[(0,r.jsx)("i",{className:e,style:{fontSize:22}}),(0,r.jsx)("div",{style:{fontSize:10,marginTop:6,wordBreak:"break-word"},children:e.replace("tabler-","")})]},e))})]})]})]})}},33176:(e,t,a)=>{"use strict";a.d(t,{$u:()=>n,Ay:()=>m,EG:()=>h,RW:()=>u,dp:()=>i,fd:()=>c,oV:()=>d,uK:()=>s});var r=a(48943),l=a(83197);let o={dataPage:{values:[],total:0},data:{},datas:[],crud:null,delete:null},i=(0,r.zD)("menu/fetchAll",async(e,t)=>{try{return(await l.A.get("/app/menu/all-data",{params:e})).data}catch(e){var a;return t.fulfillWithValue(null===(a=e.response)||void 0===a?void 0:a.data)}}),n=(0,r.zD)("menu/fetchPage",async(e,t)=>{try{return(await l.A.get("/app/menu",{params:e})).data}catch(e){var a;return t.fulfillWithValue(null===(a=e.response)||void 0===a?void 0:a.data)}}),s=(0,r.zD)("menu/fetchById",async(e,t)=>{try{return(await l.A.get("/app/menu/".concat(e))).data}catch(e){var a;return t.fulfillWithValue(null===(a=e.response)||void 0===a?void 0:a.data)}}),d=(0,r.zD)("menu/create",async(e,t)=>{try{return(await l.A.post("/app/menu",e)).data}catch(e){var a;return t.fulfillWithValue(null===(a=e.response)||void 0===a?void 0:a.data)}}),u=(0,r.zD)("menu/update",async(e,t)=>{let{id:a,params:r}=e;try{return(await l.A.put("/app/menu/".concat(a),r)).data}catch(e){var o;return t.fulfillWithValue(null===(o=e.response)||void 0===o?void 0:o.data)}}),c=(0,r.zD)("menu/delete",async(e,t)=>{try{return(await l.A.delete("/app/menu/".concat(e))).data}catch(e){var a;return t.fulfillWithValue(null===(a=e.response)||void 0===a?void 0:a.data)}}),p=(0,r.Z0)({name:"menu",initialState:o,reducers:{resetRedux:()=>o},extraReducers:e=>{e.addCase(i.fulfilled,(e,t)=>{e.datas=t.payload.data||[]}),e.addCase(n.fulfilled,(e,t)=>{var a,r;e.dataPage={values:(null===(a=t.payload.data)||void 0===a?void 0:a.values)||[],total:(null===(r=t.payload.data)||void 0===r?void 0:r.total)||0}}),e.addCase(s.fulfilled,(e,t)=>{e.data=t.payload.data}),e.addCase(c.fulfilled,(e,t)=>{e.delete=t.payload.message}),e.addCase(d.fulfilled,(e,t)=>{e.crud=t.payload}),e.addCase(u.fulfilled,(e,t)=>{e.crud=t.payload})}}),{resetRedux:h}=p.actions,m=p.reducer},83197:(e,t,a)=>{"use strict";a.d(t,{A:()=>u});var r=a(82651),l=a(2615),o=a(68411);let i=r.A.create({baseURL:"http://103.197.190.47:5001"}),n=!1,s=[];i.defaults.showLoading=!0;let d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;s.forEach(a=>{e?a.reject(e):a.resolve(t)}),s=[]};i.interceptors.request.use(async e=>{var t;let a=await (0,l.getSession)();return(null==a?void 0:a.access_token)&&(e.headers.Authorization="Bearer ".concat(a.access_token)),(null!==(t=e.showLoading)&&void 0!==t?t:i.defaults.showLoading)&&(o.L.start(),o.L.progress(10)),e}),i.interceptors.response.use(e=>{var t;return(null!==(t=e.config.showLoading)&&void 0!==t?t:i.defaults.showLoading)&&(o.L.progress(100),setTimeout(()=>{o.L.stop(),o.L.progress(0)},300)),e},async e=>{var t,a;let r=e.config;if((null!==(a=r.showLoading)&&void 0!==a?a:i.defaults.showLoading)&&(o.L.stop(),o.L.progress(0)),(null===(t=e.response)||void 0===t?void 0:t.status)===401&&!r._retry){if(n)return new Promise((e,t)=>{s.push({resolve:e,reject:t})}).then(e=>(r.headers.Authorization="Bearer ".concat(e),i(r))).catch(e=>Promise.reject(e));r._retry=!0,n=!0;try{let t=await fetch("/api/auth/refresh",{method:"GET"}),a=await t.json();if((null==a?void 0:a.error)==="RefreshAccessTokenError")return(0,l.signOut)(),Promise.reject(e);let o=null==a?void 0:a.access_token;return d(null,o),n=!1,r.headers.Authorization="Bearer ".concat(o),i(r)}catch(e){return d(e,null),n=!1,(0,l.signOut)(),Promise.reject(e)}}return Promise.reject(e)});let u=i},68411:(e,t,a)=>{"use strict";a.d(t,{L:()=>i});let r=[],l=[],o=0,i={subscribe:e=>(r.push(e),()=>{r=r.filter(t=>t!==e)}),emit(e){r.forEach(t=>t(e))},start(){o++,this.emit(!0)},stop(){--o<=0&&(o=0,this.emit(!1))},onProgress:e=>(l.push(e),()=>{l=l.filter(t=>t!==e)}),progress(e){l.forEach(t=>t(e))}}}},e=>{var t=t=>e(e.s=t);e.O(0,[5099,275,5004,277,5876,777,5273,2295,9892,2806,2598,6874,6403,6298,5181,9905,3784,9234,9668,9639,545,2615,505,2651,1019,790,9606,1829,8235,7643,3126,8441,1517,7358],()=>t(30202)),_N_E=e.O()}]);