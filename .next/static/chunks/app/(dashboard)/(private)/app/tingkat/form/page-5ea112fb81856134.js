(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5315],{40989:(e,t,a)=>{Promise.resolve().then(a.bind(a,14742))},14742:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var r=a(95155),l=a(12115),n=a(76046),o=a(64665),i=a(63551),s=a(42479),u=a(91068),d=a(69606),c=a(81638),p=a(19473),h=a(96063);let g={values:[{label:"PESANTREN",value:"PESANTREN"},{label:"FORMAL",value:"FORMAL"}]},v=()=>{let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),a=t.get("id"),v=t.get("view"),f=(0,c.j)(),y=(0,c.G)(e=>e.tingkat),k={tingkat:"",keterangan:"",nomor_urut:"",tingkat_type:{value:"",label:""}},[m,_]=(0,l.useState)(k),[w,A]=(0,l.useState)(!1),{control:L,handleSubmit:b,formState:{errors:z},reset:E}=(0,d.mN)({defaultValues:k});(0,l.useEffect)(()=>{a&&f((0,p.dm)(a)).then(e=>{var t;let a={...null==e?void 0:null===(t=e.payload)||void 0===t?void 0:t.data};a&&(a.tingkat_type=g.values.find(e=>e.value===a.tingkat_type),_(a),E(a))})},[f,E]),(0,l.useEffect)(()=>{y.crud&&(y.crud.status?(u.oR.success("Success saved"),S()):(u.oR.error("Error saved: "+y.crud.message),A(!1)))},[y]);let S=()=>{f((0,p.EG)()),e.replace("/app/tingkat/list")};return(0,r.jsxs)(o.default,{children:[(0,r.jsx)(i.default,{title:"Form Tingkat"}),(0,r.jsx)(s.default,{children:(0,r.jsx)("form",{onSubmit:b(()=>{w||(A(!0),a?f((0,p.C_)({id:a,param:{...m,tingkat_type:m.tingkat_type.value,nomor_urut:parseInt(m.nomor_urut)}})):f((0,p.FM)({...m,tingkat_type:m.tingkat_type.value,nomor_urut:parseInt(m.nomor_urut)})))}),autoComplete:"off",children:(0,h.v$)({control:L,errors:z,state:m,setState:_,fields:[(0,h.ZZ)({type:"text",key:"tingkat",label:"Tingkat",placeholder:"Input Tingkat",required:!0,readOnly:!!v}),(0,h.ZZ)({type:"select",key:"tingkat_type",label:"Tipe Lembaga",placeholder:"Pilih Tipe Lembaga",required:!0,options:g,readOnly:!!v}),(0,h.ZZ)({type:"textarea",key:"keterangan",label:"Keterangan",placeholder:"Input Keterangan",required:!1,readOnly:!!v}),(0,h.ZZ)({type:"numeral",key:"nomor_urut",label:"Nomor Urut",placeholder:"Input Nomor Urut",required:!0,readOnly:!!v}),(0,h.Jw)({onCancel:S,loading:w,disabled:!!v})]})})})]})}},19473:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>y,C_:()=>c,EG:()=>f,FM:()=>d,RU:()=>g,W5:()=>p,c4:()=>s,dm:()=>u});var r=a(48943),l=a(2615),n=a(83197);let o={dataPage:{values:[],total:0},data:{},datas:[],crud:null,delete:null,import:null,export:null},i=(0,r.zD)("tingkat/fetchAll",async(e,t)=>{let a=await (0,l.getSession)();try{return(await n.A.get("/app/tingkat/all-data",{headers:{Authorization:"Bearer ".concat(null==a?void 0:a.access_token)},params:e})).data}catch(e){var r;return t.fulfillWithValue(null===(r=e.response)||void 0===r?void 0:r.data)}}),s=(0,r.zD)("tingkat/fetchPage",async(e,t)=>{let a=await (0,l.getSession)();try{return(await n.A.get("/app/tingkat",{headers:{Authorization:"Bearer ".concat(null==a?void 0:a.access_token)},params:e})).data}catch(e){var r;return t.fulfillWithValue(null===(r=e.response)||void 0===r?void 0:r.data)}}),u=(0,r.zD)("tingkat/fetchById",async(e,t)=>{let a=await (0,l.getSession)();try{return(await n.A.get("/app/tingkat/".concat(e),{headers:{Authorization:"Bearer ".concat(null==a?void 0:a.access_token)}})).data}catch(e){var r;return t.fulfillWithValue(null===(r=e.response)||void 0===r?void 0:r.data)}}),d=(0,r.zD)("tingkat/create",async(e,t)=>{let a=await (0,l.getSession)();try{return(await n.A.post("/app/tingkat",e,{headers:{Authorization:"Bearer ".concat(null==a?void 0:a.access_token)}})).data}catch(e){var r;return t.fulfillWithValue(null===(r=e.response)||void 0===r?void 0:r.data)}}),c=(0,r.zD)("tingkat/update",async(e,t)=>{let{id:a,param:r}=e,o=await (0,l.getSession)();try{return(await n.A.put("/app/tingkat/".concat(a),r,{headers:{Authorization:"Bearer ".concat(null==o?void 0:o.access_token)}})).data}catch(e){var i;return t.fulfillWithValue(null===(i=e.response)||void 0===i?void 0:i.data)}}),p=(0,r.zD)("tingkat/delete",async(e,t)=>{let a=await (0,l.getSession)();try{return(await n.A.delete("/app/tingkat/".concat(e),{headers:{Authorization:"Bearer ".concat(null==a?void 0:a.access_token)}})).data}catch(e){var r;return t.fulfillWithValue(null===(r=e.response)||void 0===r?void 0:r.data)}}),h=(0,r.zD)("tingkat/import",async(e,t)=>{try{return(await n.A.post("/app/tingkat/import",e)).data}catch(e){var a;return t.fulfillWithValue(null===(a=e.response)||void 0===a?void 0:a.data)}}),g=(0,r.zD)("tingkat/export",async(e,t)=>{try{return(await n.A.post("/app/tingkat/export",e)).data}catch(e){var a;return t.fulfillWithValue(null===(a=e.response)||void 0===a?void 0:a.data)}}),v=(0,r.Z0)({name:"tingkat",initialState:o,reducers:{resetRedux:()=>o},extraReducers:e=>{e.addCase(i.fulfilled,(e,t)=>{e.datas=t.payload.data||[]}),e.addCase(s.fulfilled,(e,t)=>{var a,r;e.dataPage={values:(null===(a=t.payload.data)||void 0===a?void 0:a.values)||[],total:(null===(r=t.payload.data)||void 0===r?void 0:r.total)||0}}),e.addCase(u.fulfilled,(e,t)=>{e.data=t.payload.data}),e.addCase(p.fulfilled,(e,t)=>{e.delete=t.payload.message}),e.addCase(d.fulfilled,(e,t)=>{e.crud=t.payload}),e.addCase(c.fulfilled,(e,t)=>{e.crud=t.payload}),e.addCase(h.fulfilled,(e,t)=>{e.import=t.payload}),e.addCase(g.fulfilled,(e,t)=>{e.export=t.payload})}}),{resetRedux:f}=v.actions,y=v.reducer},83197:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var r=a(82651),l=a(2615),n=a(68411);let o=r.A.create({baseURL:"http://103.197.190.47:5001"}),i=!1,s=[];o.defaults.showLoading=!0;let u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;s.forEach(a=>{e?a.reject(e):a.resolve(t)}),s=[]};o.interceptors.request.use(async e=>{var t;let a=await (0,l.getSession)();return(null==a?void 0:a.access_token)&&(e.headers.Authorization="Bearer ".concat(a.access_token)),(null!==(t=e.showLoading)&&void 0!==t?t:o.defaults.showLoading)&&(n.L.start(),n.L.progress(10)),e}),o.interceptors.response.use(e=>{var t;return(null!==(t=e.config.showLoading)&&void 0!==t?t:o.defaults.showLoading)&&(n.L.progress(100),setTimeout(()=>{n.L.stop(),n.L.progress(0)},300)),e},async e=>{var t,a;let r=e.config;if((null!==(a=r.showLoading)&&void 0!==a?a:o.defaults.showLoading)&&(n.L.stop(),n.L.progress(0)),(null===(t=e.response)||void 0===t?void 0:t.status)===401&&!r._retry){if(i)return new Promise((e,t)=>{s.push({resolve:e,reject:t})}).then(e=>(r.headers.Authorization="Bearer ".concat(e),o(r))).catch(e=>Promise.reject(e));r._retry=!0,i=!0;try{let t=await fetch("/api/auth/refresh",{method:"GET"}),a=await t.json();if((null==a?void 0:a.error)==="RefreshAccessTokenError")return(0,l.signOut)(),Promise.reject(e);let n=null==a?void 0:a.access_token;return u(null,n),i=!1,r.headers.Authorization="Bearer ".concat(n),o(r)}catch(e){return u(e,null),i=!1,(0,l.signOut)(),Promise.reject(e)}}return Promise.reject(e)});let d=o},68411:(e,t,a)=>{"use strict";a.d(t,{L:()=>o});let r=[],l=[],n=0,o={subscribe:e=>(r.push(e),()=>{r=r.filter(t=>t!==e)}),emit(e){r.forEach(t=>t(e))},start(){n++,this.emit(!0)},stop(){--n<=0&&(n=0,this.emit(!1))},onProgress:e=>(l.push(e),()=>{l=l.filter(t=>t!==e)}),progress(e){l.forEach(t=>t(e))}}}},e=>{var t=t=>e(e.s=t);e.O(0,[5099,275,5004,277,5876,777,5273,2295,9892,2806,2598,6874,6403,6298,5181,9905,3784,9234,9668,9639,545,2615,505,2651,1019,790,9606,1829,8235,7643,3126,8441,1517,7358],()=>t(40989)),_N_E=e.O()}]);