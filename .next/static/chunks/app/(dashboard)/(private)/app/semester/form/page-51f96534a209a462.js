(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5849],{811:(a,e,t)=>{Promise.resolve().then(t.bind(t,74534))},74534:(a,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>y});var r=t(95155),l=t(12115),s=t(76046),n=t(64665),u=t(63551),o=t(42479),d=t(91068),i=t(69606),c=t(81638),p=t(60289),h=t(96063),v=t(83785);let f={values:[{label:"Aktif",value:"Aktif"},{label:"Nonaktif",value:"Nonaktif"}]},m=[{label:"Ganjil",value:"Ganjil",nomor:1},{label:"Genap",value:"Genap",nomor:2}],y=()=>{let a=(0,s.useRouter)(),e=(0,s.useSearchParams)(),t=e.get("id"),y=e.get("view"),g=(0,c.j)(),_=(0,c.G)(a=>a.semester),j=(0,c.G)(a=>a.tahun_ajaran),A={nama_semester:{value:"",label:""},keterangan:"",nomor_urut:"",status:{value:"Aktif",label:"Aktif"},id_tahunajaran:{value:"",label:""}},[w,k]=(0,l.useState)(A),[b,z]=(0,l.useState)(!1),{control:C,handleSubmit:S,formState:{errors:x},reset:D,setValue:W}=(0,i.mN)({defaultValues:A});(0,l.useEffect)(()=>{g((0,v.bi)({status:"Aktif"})),t&&g((0,p.Nm)(t)).then(a=>{var e;let t={...null==a?void 0:null===(e=a.payload)||void 0===e?void 0:e.data};t&&(t.nama_semester=m.find(a=>a.value===t.nama_semester),t.status=f.values.find(a=>a.value===t.status)||{label:"Arsip",value:"Arsip"},t.id_tahunajaran={value:t.tahun_ajaran.id_tahunajaran,label:t.tahun_ajaran.tahun_ajaran},k(t),D(t))})},[g,D]),(0,l.useEffect)(()=>{_.crud&&(_.crud.status?(d.oR.success("Success saved"),L()):(d.oR.error("Error saved: "+_.crud.message),z(!1)))},[_]);let L=()=>{g((0,p.EG)()),a.replace("/app/semester/list")};return(0,r.jsxs)(n.default,{children:[(0,r.jsx)(u.default,{title:"Form Semester"}),(0,r.jsx)(o.default,{children:(0,r.jsx)("form",{onSubmit:S(()=>{b||(z(!0),t?g((0,p.my)({id:t,params:{...w,status:w.status.value,nomor_urut:parseInt(w.nomor_urut),nama_semester:w.nama_semester.value}})):g((0,p.R_)({...w,status:w.status.value,nomor_urut:parseInt(w.nomor_urut),nama_semester:w.nama_semester.value})))}),autoComplete:"off",children:(0,h.v$)({control:C,errors:x,state:w,setState:k,fields:[(0,h.ZZ)({type:"select",key:"id_tahunajaran",label:"Tahun Ajaran",placeholder:"Pilih Tahun Ajaran",required:!0,options:{values:j.datas.map(a=>({label:a.tahun_ajaran,value:a.id_tahunajaran}))},readOnly:!!y}),(0,h.ZZ)({type:"select",key:"nama_semester",label:"Semester",placeholder:"Input Semester",required:!0,readOnly:!!y,options:{values:m,onChange:a=>{W("nomor_urut",a.nomor),k(e=>({...e,nomor_urut:a.nomor}))}}}),(0,h.ZZ)({type:"textarea",key:"keterangan",label:"Keterangan",placeholder:"Input Keterangan",required:!1,readOnly:!!y}),(0,h.ZZ)({type:"numeral",key:"nomor_urut",label:"Nomor Urut",placeholder:"Input Nomor Urut",required:!0,readOnly:!!y}),(0,h.ZZ)({type:"select",key:"status",label:"Status",placeholder:"Pilih Status",required:!0,options:f,readOnly:!!y}),(0,h.Jw)({onCancel:L,loading:b,disabled:!!y})]})})})]})}},60289:(a,e,t)=>{"use strict";t.d(e,{Ay:()=>y,EG:()=>m,Nm:()=>d,Q$:()=>p,RU:()=>v,R_:()=>i,SZ:()=>o,my:()=>c});var r=t(48943),l=t(2615),s=t(83197);let n={dataPage:{values:[],total:0},data:{},datas:[],crud:null,delete:null,import:null,export:null},u=(0,r.zD)("semester/fetchAll",async(a,e)=>{let t=await (0,l.getSession)();try{return(await s.A.get("/app/semester/all-data",{headers:{Authorization:"Bearer ".concat(null==t?void 0:t.access_token)},params:a})).data}catch(a){var r;return e.fulfillWithValue(null===(r=a.response)||void 0===r?void 0:r.data)}}),o=(0,r.zD)("semester/fetchPage",async(a,e)=>{let t=await (0,l.getSession)();try{return(await s.A.get("/app/semester",{headers:{Authorization:"Bearer ".concat(null==t?void 0:t.access_token)},params:a})).data}catch(a){var r;return e.fulfillWithValue(null===(r=a.response)||void 0===r?void 0:r.data)}}),d=(0,r.zD)("semester/fetchById",async(a,e)=>{let t=await (0,l.getSession)();try{return(await s.A.get("/app/semester/".concat(a),{headers:{Authorization:"Bearer ".concat(null==t?void 0:t.access_token)}})).data}catch(a){var r;return e.fulfillWithValue(null===(r=a.response)||void 0===r?void 0:r.data)}}),i=(0,r.zD)("semester/create",async(a,e)=>{let t=await (0,l.getSession)();try{return(await s.A.post("/app/semester",a,{headers:{Authorization:"Bearer ".concat(null==t?void 0:t.access_token)}})).data}catch(a){var r;return e.fulfillWithValue(null===(r=a.response)||void 0===r?void 0:r.data)}}),c=(0,r.zD)("semester/update",async(a,e)=>{let{id:t,params:r}=a,n=await (0,l.getSession)();try{return(await s.A.put("/app/semester/".concat(t),r,{headers:{Authorization:"Bearer ".concat(null==n?void 0:n.access_token)}})).data}catch(a){var u;return e.fulfillWithValue(null===(u=a.response)||void 0===u?void 0:u.data)}}),p=(0,r.zD)("semester/delete",async(a,e)=>{let t=await (0,l.getSession)();try{return(await s.A.delete("/app/semester/".concat(a),{headers:{Authorization:"Bearer ".concat(null==t?void 0:t.access_token)}})).data}catch(a){var r;return e.fulfillWithValue(null===(r=a.response)||void 0===r?void 0:r.data)}}),h=(0,r.zD)("semester/import",async(a,e)=>{try{return(await s.A.post("/app/semester/import",a)).data}catch(a){var t;return e.fulfillWithValue(null===(t=a.response)||void 0===t?void 0:t.data)}}),v=(0,r.zD)("semester/export",async(a,e)=>{try{return(await s.A.post("/app/semester/export",a)).data}catch(a){var t;return e.fulfillWithValue(null===(t=a.response)||void 0===t?void 0:t.data)}}),f=(0,r.Z0)({name:"semester",initialState:n,reducers:{resetRedux:()=>n},extraReducers:a=>{a.addCase(u.fulfilled,(a,e)=>{a.datas=e.payload.data||[]}),a.addCase(o.fulfilled,(a,e)=>{var t,r;a.dataPage={values:(null===(t=e.payload.data)||void 0===t?void 0:t.values)||[],total:(null===(r=e.payload.data)||void 0===r?void 0:r.total)||0}}),a.addCase(d.fulfilled,(a,e)=>{a.data=e.payload.data}),a.addCase(p.fulfilled,(a,e)=>{a.delete=e.payload.message}),a.addCase(i.fulfilled,(a,e)=>{a.crud=e.payload}),a.addCase(c.fulfilled,(a,e)=>{a.crud=e.payload}),a.addCase(h.fulfilled,(a,e)=>{a.import=e.payload}),a.addCase(v.fulfilled,(a,e)=>{a.export=e.payload})}}),{resetRedux:m}=f.actions,y=f.reducer},83785:(a,e,t)=>{"use strict";t.d(e,{Ay:()=>m,EG:()=>f,Nn:()=>c,RD:()=>u,RU:()=>h,U7:()=>o,WI:()=>d,bi:()=>n,dY:()=>i});var r=t(48943),l=t(83197);let s={dataPage:{values:[],total:0},data:{},datas:[],crud:null,delete:null,import:null,export:null},n=(0,r.zD)("tahun-ajaran/fetchAll",async(a,e)=>{try{return(await l.A.get("/app/tahun-ajaran/all-data",{params:a})).data}catch(a){var t;return e.fulfillWithValue(null===(t=a.response)||void 0===t?void 0:t.data)}}),u=(0,r.zD)("tahun-ajaran/fetchPage",async(a,e)=>{try{return(await l.A.get("/app/tahun-ajaran",{params:a})).data}catch(a){var t;return e.fulfillWithValue(null===(t=a.response)||void 0===t?void 0:t.data)}}),o=(0,r.zD)("tahun-ajaran/fetchById",async(a,e)=>{try{return(await l.A.get("/app/tahun-ajaran/".concat(a))).data}catch(a){var t;return e.fulfillWithValue(null===(t=a.response)||void 0===t?void 0:t.data)}}),d=(0,r.zD)("tahun-ajaran/create",async(a,e)=>{try{return(await l.A.post("/app/tahun-ajaran",a)).data}catch(a){var t;return e.fulfillWithValue(null===(t=a.response)||void 0===t?void 0:t.data)}}),i=(0,r.zD)("tahun-ajaran/update",async(a,e)=>{let{id:t,params:r}=a;try{return(await l.A.put("/app/tahun-ajaran/".concat(t),r)).data}catch(a){var s;return e.fulfillWithValue(null===(s=a.response)||void 0===s?void 0:s.data)}}),c=(0,r.zD)("tahun-ajaran/delete",async(a,e)=>{try{return(await l.A.delete("/app/tahun-ajaran/".concat(a))).data}catch(a){var t;return e.fulfillWithValue(null===(t=a.response)||void 0===t?void 0:t.data)}}),p=(0,r.zD)("tahun-ajaran/import",async(a,e)=>{try{return(await l.A.post("/app/tahun-ajaran/import",a)).data}catch(a){var t;return e.fulfillWithValue(null===(t=a.response)||void 0===t?void 0:t.data)}}),h=(0,r.zD)("tahun-ajaran/export",async(a,e)=>{try{return(await l.A.post("/app/tahun-ajaran/export",a)).data}catch(a){var t;return e.fulfillWithValue(null===(t=a.response)||void 0===t?void 0:t.data)}}),v=(0,r.Z0)({name:"tahun_ajaran",initialState:s,reducers:{resetRedux:()=>s},extraReducers:a=>{a.addCase(n.fulfilled,(a,e)=>{a.datas=e.payload.data||[]}),a.addCase(u.fulfilled,(a,e)=>{var t,r;a.dataPage={values:(null===(t=e.payload.data)||void 0===t?void 0:t.values)||[],total:(null===(r=e.payload.data)||void 0===r?void 0:r.total)||0}}),a.addCase(o.fulfilled,(a,e)=>{a.data=e.payload.data}),a.addCase(c.fulfilled,(a,e)=>{a.delete=e.payload.message}),a.addCase(d.fulfilled,(a,e)=>{a.crud=e.payload}),a.addCase(i.fulfilled,(a,e)=>{a.crud=e.payload}),a.addCase(p.fulfilled,(a,e)=>{a.import=e.payload}),a.addCase(h.fulfilled,(a,e)=>{a.export=e.payload})}}),{resetRedux:f}=v.actions,m=v.reducer},83197:(a,e,t)=>{"use strict";t.d(e,{A:()=>i});var r=t(82651),l=t(2615),s=t(68411);let n=r.A.create({baseURL:"http://103.197.190.47:5001"}),u=!1,o=[];n.defaults.showLoading=!0;let d=function(a){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o.forEach(t=>{a?t.reject(a):t.resolve(e)}),o=[]};n.interceptors.request.use(async a=>{var e;let t=await (0,l.getSession)();return(null==t?void 0:t.access_token)&&(a.headers.Authorization="Bearer ".concat(t.access_token)),(null!==(e=a.showLoading)&&void 0!==e?e:n.defaults.showLoading)&&(s.L.start(),s.L.progress(10)),a}),n.interceptors.response.use(a=>{var e;return(null!==(e=a.config.showLoading)&&void 0!==e?e:n.defaults.showLoading)&&(s.L.progress(100),setTimeout(()=>{s.L.stop(),s.L.progress(0)},300)),a},async a=>{var e,t;let r=a.config;if((null!==(t=r.showLoading)&&void 0!==t?t:n.defaults.showLoading)&&(s.L.stop(),s.L.progress(0)),(null===(e=a.response)||void 0===e?void 0:e.status)===401&&!r._retry){if(u)return new Promise((a,e)=>{o.push({resolve:a,reject:e})}).then(a=>(r.headers.Authorization="Bearer ".concat(a),n(r))).catch(a=>Promise.reject(a));r._retry=!0,u=!0;try{let e=await fetch("/api/auth/refresh",{method:"GET"}),t=await e.json();if((null==t?void 0:t.error)==="RefreshAccessTokenError")return(0,l.signOut)(),Promise.reject(a);let s=null==t?void 0:t.access_token;return d(null,s),u=!1,r.headers.Authorization="Bearer ".concat(s),n(r)}catch(a){return d(a,null),u=!1,(0,l.signOut)(),Promise.reject(a)}}return Promise.reject(a)});let i=n},68411:(a,e,t)=>{"use strict";t.d(e,{L:()=>n});let r=[],l=[],s=0,n={subscribe:a=>(r.push(a),()=>{r=r.filter(e=>e!==a)}),emit(a){r.forEach(e=>e(a))},start(){s++,this.emit(!0)},stop(){--s<=0&&(s=0,this.emit(!1))},onProgress:a=>(l.push(a),()=>{l=l.filter(e=>e!==a)}),progress(a){l.forEach(e=>e(a))}}}},a=>{var e=e=>a(a.s=e);a.O(0,[5099,275,5004,277,5876,777,5273,2295,9892,2806,2598,6874,6403,6298,5181,9905,3784,9234,9668,9639,545,2615,505,2651,1019,790,9606,1829,8235,7643,3126,8441,1517,7358],()=>e(811)),_N_E=a.O()}]);